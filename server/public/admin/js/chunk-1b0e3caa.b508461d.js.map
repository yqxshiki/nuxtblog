{"version":3,"sources":["webpack:///./src/components/create.vue?25df","webpack:///src/components/create.vue","webpack:///./src/components/create.vue?073b","webpack:///./src/components/create.vue","webpack:///./src/components/create.vue?11e8"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","loading","_v","_s","id","ref","form","model","value","callback","$$v","$set","expression","_l","item","key","_id","name","staticClass","uploadUrl","afterupload","getAuthHeaders","icon","staticStyle","on","change","$imgAdd","onSubmit","cancel","staticRenderFns","props","data","title","categories","body","bodyrender","count","parents","html","methods","res","url","$message","message","type","$axios","post","$router","push","isloading","undefined","mounted","fetchparent","getblog","setInterval","component"],"mappings":"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","file":"js/chunk-1b0e3caa.b508461d.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"create\"}},[_c('myloading',{attrs:{\"loading\":_vm.loading}},[_c('h1',[_vm._v(_vm._s(_vm.id?'编辑':'新建')+\"文章\")]),_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"文章标题\"}},[_c('a',{attrs:{\"name\":\"top\"}}),_c('el-input',{model:{value:(_vm.form.title),callback:function ($$v) {_vm.$set(_vm.form, \"title\", $$v)},expression:\"form.title\"}})],1),_c('el-form-item',{attrs:{\"label\":\"文章分类\"}},[_c('el-select',{attrs:{\"multiple\":\"\"},model:{value:(_vm.form.categories),callback:function ($$v) {_vm.$set(_vm.form, \"categories\", $$v)},expression:\"form.categories\"}},_vm._l((_vm.parents),function(item){return _c('el-option',{key:item._id,attrs:{\"label\":item.name,\"value\":item._id}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"文章图片\"}},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":_vm.uploadUrl,\"show-file-list\":false,\"on-success\":_vm.afterupload,\"headers\":_vm.getAuthHeaders}},[(_vm.form.icon)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.form.icon}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1),_c('el-form-item',{attrs:{\"label\":\"文章内容\"}},[_c('mavon-editor',{ref:\"md\",staticStyle:{\"min-height\":\"600px\"},attrs:{\"ishljs\":true},on:{\"change\":_vm.change,\"imgAdd\":_vm.$imgAdd},model:{value:(_vm.form.body),callback:function ($$v) {_vm.$set(_vm.form, \"body\", $$v)},expression:\"form.body\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onSubmit}},[_vm._v(\"立即创建\")]),_c('el-button',{attrs:{\"type\":\"info\"},on:{\"click\":_vm.cancel}},[_vm._v(\"取消\")])],1),_c('a',{attrs:{\"name\":\"bottom\"}}),_c('div',{staticClass:\"icon\"},[_c('div',{staticClass:\"go\"},[_c('a',{attrs:{\"href\":\"#top\"}},[_c('i',{staticClass:\"el-icon-top\"})])]),_c('div',{staticClass:\"go\"},[_c('a',{attrs:{\"href\":\"#bottom\"}},[_c('i',{staticClass:\"el-icon-bottom\"})])])])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"create\">\r\n    <myloading :loading=\"loading\">\r\n      <h1>{{id?'编辑':'新建'}}文章</h1>\r\n      <el-form ref=\"form\" :model=\"form\" label-width=\"80px\">\r\n        <el-form-item label=\"文章标题\">\r\n          <a name=\"top\"></a>\r\n          <el-input v-model=\"form.title\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"文章分类\">\r\n          <el-select v-model=\"form.categories\" multiple>\r\n            <el-option v-for=\"item in parents\" :key=\"item._id\" :label=\"item.name\" :value=\"item._id\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"文章图片\">\r\n          <el-upload\r\n            class=\"avatar-uploader\"\r\n            :action=\"uploadUrl\"\r\n            :show-file-list=\"false\"\r\n            :on-success=\"afterupload\"\r\n            :headers=\"getAuthHeaders\"\r\n          >\r\n            <img v-if=\"form.icon\" :src=\"form.icon\" class=\"avatar\" />\r\n            <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n          </el-upload>\r\n        </el-form-item>\r\n        <el-form-item label=\"文章内容\">\r\n          <mavon-editor\r\n            :ishljs=\"true\"\r\n            v-model=\"form.body\"\r\n            ref=\"md\"\r\n            @change=\"change\"\r\n            style=\"min-height: 600px\"\r\n            @imgAdd=\"$imgAdd\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"onSubmit\">立即创建</el-button>\r\n          <el-button type=\"info\" @click=\"cancel\">取消</el-button>\r\n        </el-form-item>\r\n        <a name=\"bottom\"></a>\r\n        <div class=\"icon\">\r\n          <div class=\"go\">\r\n            <a href=\"#top\">\r\n              <i class=\"el-icon-top\"></i>\r\n            </a>\r\n          </div>\r\n          <div class=\"go\">\r\n            <a href=\"#bottom\">\r\n              <i class=\"el-icon-bottom\"></i>\r\n            </a>\r\n          </div>\r\n        </div>\r\n      </el-form>\r\n    </myloading>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"create\",\r\n  props: {\r\n    id: {}\r\n  },\r\n  data() {\r\n    return {\r\n      form: {\r\n        title: \"\",\r\n        categories: [],\r\n        // 未渲染的内容\r\n        body: \"\",\r\n        icon:\"\",\r\n        // 渲染后的内容\r\n        bodyrender: \"\",\r\n        count: \"\"\r\n      },\r\n      // 类别\r\n      parents: \"\",\r\n      // 渲染后的内容\r\n      html: \"\",\r\n      loading: true\r\n    };\r\n  },\r\n  methods: {\r\n    // 显示图片\r\n    afterupload(res) {\r\n      this.$set(this.form, \"icon\", res.url);\r\n    },\r\n    // 提交\r\n    onSubmit() {\r\n      if (\r\n        this.form.title == \"\" ||\r\n        this.form.body == \"\" ||\r\n        this.form.categories == \"\"\r\n      ) {\r\n        this.$message({\r\n          message: \"文章标题或者文章内容不能为空\",\r\n          type: \"warning\"\r\n        });\r\n      } else {\r\n        this.form.bodyrender = this.html;\r\n        this.form.count = this.id ? this.form.count : 0;\r\n        let res;\r\n        if (this.id) {\r\n          res = this.$axios.post(\r\n            \"/rest/acticles/resive/\" + this.$route.params.id,\r\n            this.form\r\n          );\r\n        } else {\r\n          res = this.$axios.post(\"/rest/acticles/create\", this.form);\r\n        }\r\n        this.$message({\r\n          message: \"恭喜你，保存成功\",\r\n          type: \"success\"\r\n        });\r\n        this.$router.push(\"/displaylist\");\r\n      }\r\n    },\r\n    // 所有操作都会被解析重新渲染\r\n    change(value, render) {\r\n      // render 为 markdown 解析后的结果[html]\r\n      this.html = render;\r\n    },\r\n    // 取消\r\n    cancel() {\r\n      this.form.title = \"\";\r\n      this.form.body = \"\";\r\n      this.form.categories = \"\";\r\n    },\r\n    // 获取类别\r\n    async fetchparent() {\r\n      const res = await this.$axios.get(\"/rest/categories/category\");\r\n      this.parents = res.data;\r\n    },\r\n    // 获取文章详情\r\n    async getblog() {\r\n      const res = await this.$axios.get(\r\n        \"/rest/acticles/details/\" + this.$route.params.id\r\n      );\r\n      this.form = res.data;\r\n    },\r\n    isloading() {\r\n      if (this.form.title == undefined) {\r\n        return;\r\n      } else {\r\n        this.loading = false;\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.fetchparent();\r\n    this.id && this.getblog();\r\n    if (this.id) {\r\n      setInterval(() => {\r\n        this.isloading();\r\n      }, 600);\r\n    } else {\r\n      this.loading = false;\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style scoped>\r\n.icon {\r\n  position: absolute;\r\n  right: 3rem;\r\n  top: 50%;\r\n  z-index: 80000;\r\n}\r\n.go {\r\n  background: #ccc;\r\n  border-radius: 50%;\r\n  margin: 1rem;\r\n}\r\n.go i {\r\n  font-size: 2rem;\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./create.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./create.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./create.vue?vue&type=template&id=082c49e8&scoped=true&\"\nimport script from \"./create.vue?vue&type=script&lang=js&\"\nexport * from \"./create.vue?vue&type=script&lang=js&\"\nimport style0 from \"./create.vue?vue&type=style&index=0&id=082c49e8&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"082c49e8\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./create.vue?vue&type=style&index=0&id=082c49e8&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./create.vue?vue&type=style&index=0&id=082c49e8&scoped=true&lang=css&\""],"sourceRoot":""}